<div class="report_main">
  <div class="criteria">
    <div class="cr_seg">
      <div
        [ngClass]="{
                      selected_report: selected =='Total Stock',
                    }"
        class="tab_report"
        (click)="totalstock()"
      >
        Total Stock
      </div>
      <div
        [ngClass]="{
                      selected_report: selected=='Ready Stock',
                    }"
        class="tab_report"
        (click)="ready()"
      >
        Ready Stock
      </div>
      <div
        [ngClass]="{
                      selected_report: selected=='Rolled But Not In Yard Stock',
                    }"
        class="tab_report"
        (click)="rolled_bniy()"
      >
        Rolled but in yard
      </div>
    </div>

    <div class="cr_seg" *ngIf="final_report.length > 0">
      <div class="tab_report cr_stats">
        Total Coil : {{ final_report.length }}
      </div>
      <div class="tab_report cr_stats">
        Total Weight : {{ getTotalweight(final_report).toFixed(2) }}
      </div>
    </div>

    <div class="cr_seg">
      <div class="input-wrapper_report">
        <input
          maxlength="12"
          id="coilIdInput"
          class="coil-input-report"
          type="text"
          [(ngModel)]="CoilId"
          placeholder="Enter Coil ID"
          title="Enter Coil ID"
          (keyup.enter)="onSearch()"
        />
      </div>

      <div class="input-wrapper_report">
        <input
          maxlength="12"
          id="coilIdInput"
          class="coil-input-report"
          type="text"
          [(ngModel)]="Width"
          placeholder="Enter Width"
          title="Enter Width"
          (keyup.enter)="onSearch()"
        />
      </div>
      <div class="input-wrapper_report">
        <input
          maxlength="12"
          id="coilIdInput"
          class="coil-input-report"
          type="text"
          [(ngModel)]="Thick"
          placeholder="Enter Thickness"
          title="Enter Thickness"
          (keyup.enter)="onSearch()"
        />
      </div>

      <div class="input-wrapper_report">
        <input
          maxlength="12"
          id="coilIdInput"
          class="coil-input-report"
          type="text"
          [(ngModel)]="Dest"
          placeholder="Enter Destination"
          title="Enter Destination"
          (keyup.enter)="onSearch()"
        />
      </div>
    </div>
  </div>

  <div class="loader" *ngIf="isLoading"></div>
  <div *ngIf="!isLoading" class="report_table">
    <div class="container">
      <div class="table-container">
        <div class="table-wrapper">
          <table id="fsttable">
            <thead>
              <tr>
                <th>Sl</th>
                <th>Coil Id</th>
                <th>Saddle Id</th>
                <th>Width</th>
                <th>Thick</th>
                <th>Cool Time</th>
                <th>Dest</th>
                <th>Wt</th>
                <th>Grade</th>
                <th>Heat No</th>
                <th>Entry Dt</th>
              </tr>
            </thead>
            <tbody>
              <!-- const diff = this.getMinuteDiff(item.HSMPRODTIME); 
              return diff > 4320 ? 'assets/images/coil.png' : 'assets/images/hot.png'; -->

              <tr *ngFor="let item of final_report; let i = index">
                <td>{{ i + 1 }}</td>
                <td
                  [ngClass]="{
                    hot: getMinuteDiff(item.HSMPRODTIME) <4320,
                
                  }"
                >
                  {{ item.COILID }}
                </td>
                <td>{{ item.SADDLENAME }}</td>
                <td>{{ item.WIDTH }}</td>
                <td>{{ item.THICK }}</td>

                <!-- show current time - item.HSMPRODTIME  -->
                <td>{{ (getMinuteDiff(item.HSMPRODTIME) / 60).toFixed() }}</td>
                <td>{{ item.DEST }}</td>
                <td>{{ item.WEIGHT }}</td>
                <td>{{ item.GRADE }}</td>
                <td>{{ item.HEATNO || "N/A" }}</td>
                <td>{{ item.UPDTIME | date : "dd-MMM HH:mm" }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="footer">
          <div class="color-theme">
            <button class="pdf-btn pdf-btn-primary">
              <i class="fas fa-file-pdf"></i>
              Download PDF
            </button>

            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->

            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->
          </div>

          <div class="scroll-info">
            <!-- <i class="fas fa-mouse-pointer"></i> -->
            <span>
              {{ selected }} report, Scroll vertically to view all
              {{ final_report.length }} records</span
            >
          </div>

          <h2 *ngIf="final_report.length == 0" class="nodata">! No data ☹️</h2>
          <div *ngIf="final_report.length > 0" class="record-count">
            <i class="fas fa-database"></i>
            <span
              >Total Records: <strong>{{ final_report.length }}</strong></span
            >
          </div>
        </div>
      </div>
      <div class="table-container">
        <div class="table-wrapper">
          <table id="sndtable">
            <thead>
              <tr>
                <th>Sl</th>
                <th>Width</th>
                <th>Thick</th>
                <th>Coils</th>
                <th>Wt</th>
                <th>Grd</th>
              </tr>
            </thead>
            <tbody>
              <!-- Table rows will be generated by JavaScript -->

              <tr *ngFor="let item of summary_report; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ item.WIDTH }}</td>
                <td>{{ item.THICK }}</td>
                <td>{{ item.COILS }}</td>
                <td>{{ item.Wt }}</td>
                <td>{{ item.DEST }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="footer">
          <div class="color-theme">
            <button class="pdf-btn pdf-btn-primary">
              <i class="fas fa-file-pdf"></i>
              Download PDF
            </button>
            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->
          </div>

          <div class="scroll-info">
            <!-- <i class="fas fa-mouse-pointer"></i> -->
            <span>Thickness X Grade X Width Summary </span>
          </div>
          <h2 class="nodata" *ngIf="summary_report.length == 0">
            ! No data ☹️
          </h2>
          <div *ngIf="summary_report.length > 0" class="record-count">
            <i class="fas fa-database"></i>
            <span
              >Total Records: <strong>{{ summary_report.length }}</strong></span
            >
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="criteria2" style="margin: 8px 0px">
    <div class="cr_seg">
      <div
        [ngClass]="{
                      selected_report: selected =='Total Stock',
                    }"
        class="tab_report"
        (click)="totalstock()"
      >
        Coils Received
      </div>
      <div
        [ngClass]="{
                      selected_report: selected=='Ready Stock',
                    }"
        class="tab_report"
        (click)="ready()"
      >
        Yesterday ABC Shift
      </div>
      <div class="tab_report">Today Shift</div>
    </div>
    <div class="cr_seg">
      <div
        [ngClass]="{
                      selected_report: selected =='Total Stock',
                    }"
        class="tab_report"
        (click)="totalstock()"
      >
        Coil Exited
      </div>
      <div
        [ngClass]="{
                      selected_report: selected=='Ready Stock',
                    }"
        class="tab_report"
        (click)="ready()"
      >
        Yesterday ABC Shift
      </div>
      <div class="tab_report">Today Shift</div>
    </div>
  </div> -->
  <div *ngIf="!isLoading" class="movment_table">
    <div class="container">
      <div class="table-container">
        <div class="table-wrapper move_table_height">
          <table id="trdtable">
            <thead>
              <tr>
                <th>Sl</th>
                <th>Receive Date</th>
                <th>Heat No</th>
                <th>HSM Coil ID</th>
                <th>HSM Grd</th>
                <th>HSM Thk</th>
                <th>HSM WD</th>
              </tr>
            </thead>
            <tbody>
              <!-- const diff = this.getMinuteDiff(item.HSMPRODTIME); 
      return diff > 4320 ? 'assets/images/coil.png' : 'assets/images/hot.png'; -->

              <tr *ngFor="let item of raw_movement_addtime; let i = index">
                <!-- <td>{{ i + 1 }}</td>
                <td
                  [ngClass]="{
                    hot: getMinuteDiff(item.HSMPRODTIME) <4320,
                
                  }"
                >
                  {{ item.COILID }}
                </td>
                <td>{{ item.HEATNO }}</td>
                <td>{{ item.COILID }}</td>
                <td>{{ item.GRADE }}</td>
                <td>{{ item.THICK }}</td>
                <td>{{ item.WIDTH }}</td> -->

                <td>{{i+1}}</td>
                <td>{{ item.ADDTIME | date : "dd-MMM HH:mm"  }}</td>
                <td>{{ item.HEATNO }}</td>
                <td>{{ item.COILID }}</td>
                <td>{{ item.GRADE }}</td>
                <td>{{ item.THICK}}</td>
                <td>{{ item.WIDTH}}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="footer">
          <div class="color-theme">
            <button class="pdf-btn pdf-btn-primary">
              <i class="fas fa-file-pdf"></i>
              Download PDF
            </button>

            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->

            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->
          </div>

          <div class="scroll-info">
            <!-- <i class="fas fa-mouse-pointer"></i> -->
            <span>
              {{ selected }} report, Scroll vertically to view all
              {{ raw_movement.length }} records</span
            >
          </div>

          <h2 *ngIf="raw_movement_addtime.length == 0" class="nodata">! No data ☹️</h2>
          <div *ngIf="raw_movement_addtime.length > 0" class="record-count">
            <i class="fas fa-database"></i>
            <span
              >Total Records: <strong>{{ raw_movement_addtime.length }}</strong></span
            >
          </div>
        </div>
      </div>
      <div class="table-container">
        <div class="table-wrapper move_table_height">
          <table id="fthtable">
            <thead>
              <tr>
                <th>Sl</th>
                <th>Exit Date</th>
                <th>Heat No</th>
                <th>HSM Coil ID</th>
                <th>HSM Grd</th>
                <th>HSM Thk</th>
                <th>HSM WD</th>
              </tr>
            </thead>
            <tbody>
              <!-- Table rows will be generated by JavaScript -->

              <tr
                *ngFor="let item of raw_movement_with_removetime; let i = index"
              >
                <td>{{ i + 1 }}</td>
                <td>{{ item.RMVTIME | date : "dd-MMM HH:mm"  }}</td>
                <td>{{ item.HEATNO }}</td>
                <td>{{ item.COILID }}</td>
                <td>{{ item.GRADE }}</td>
                <td>{{ item.THICK}}</td>
                <td>{{ item.WIDTH}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="footer">
          <div class="color-theme">
            <button class="pdf-btn pdf-btn-primary">
              <i class="fas fa-file-pdf"></i>
              Download PDF
            </button>
            <!-- <span>Color Theme:</span>
            <div class="color-box blue" title="#4498eb"></div>
            <div class="color-box orange" title="rgb(253, 126, 76)"></div> -->
          </div>

          <div class="scroll-info">
            <!-- <i class="fas fa-mouse-pointer"></i> -->
            <span>Thickness X Grade X Width Summary </span>
          </div>
          <h2 class="nodata" *ngIf="raw_movement_with_removetime.length == 0">
            ! No data ☹️
          </h2>
          <div *ngIf="raw_movement_with_removetime.length > 0" class="record-count">
            <i class="fas fa-database"></i>
            <span
              >Total Records: <strong>{{ raw_movement_with_removetime.length }}</strong></span
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- "UPDTIME": "2025-11-24T03:59:37.000Z",
            "SADDLENAME": "A1",
            "ROWNAME": "A",
            "FLR": 0,
            "FIT": 1,
            "ACTIVE": 0,
            "COILID": "BSL001263732",
            "SADDLESEQ": 1,
            "HSMPRODTIME": "2025-09-22T20:30:00.000Z",
            "THICK": 2.75,
            "WIDTH": 930,
            "DEST": "P3CR2K/DCR",
            "GRADE": null,
            "WEIGHT": 18.28,
            "HEATNO": null -->
